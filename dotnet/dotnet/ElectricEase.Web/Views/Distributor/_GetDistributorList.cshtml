@model List<ElectricEase.Models.Distributor>
<style>
    #ptexample_wrapper .row:nth-child(1) .col-sm-6:first-child {
        width: 25%;
        margin-left: 1%;
    }
</style>
<script>
    //$(document).ready(function () {
    //    $('#DistributorTable').dataTable({
    //        "aLengthMenu": [[5, 10, 15, 25, -1], [5, 10, 15, 25, "All"]],
    //        "sDom": '<"top"flp>rt<"bottom"pri>',
    //        "columnDefs": [
    //              { "orderable": false, "targets": 6 }
    //        ]
    //    });
    //    var clientdivv = ('#DistributorTable');
    //    $(clientdivv[0].parentElement).removeClass('col-md-12');
    //    $(clientdivv[0].parentElement).addClass('table-responsive');
    //});
    var isloaded = false;
    $(document).ready(function () {
        var assemdropdwn = document.getElementsByName("DistributorTable_length");
        var searchbox = $('#DistributorTable_length_filter input');
        var pagno = Cookies.get('Distributorpageno');
        if (pagno == null || pagno == "") {
            pagno = 0;
        }
        var pagelen = Cookies.get('Distributordtpagelen');
        if (typeof pagelen != 'undefined' && pagelen != null && pagelen != "") {
            pagelen = Number(pagelen);
        }
        else {
            pagelen = 5;
        }
        var table = null;
        if (Cookies.get('Distributordtpagelen') != null && Cookies.get('Distributordtpagelen') != "") {
            var tab = $("#DistributorTable").dataTable({
                "aLengthMenu": [[5, 10, 15, 25, -1], [5, 10, 15, 25, "All"]],
                "sDom": '<"top"flp>rt<"bottom"pri>',
                "iDisplayLength": pagelen,
                "order": [[0, "desc"]],
                "aoColumnDefs": [{ "bVisible": false, "aTargets": [0] }]
            });
            table = tab;
            pagno = Number(pagno);
            var total = $('.paginate_button');
            if (total.length == 3) {
                pagno = 0;
            }
            if (pagno > 0) {
                tab.fnPageChange(pagno, true);
            }
            if (Cookies.get('Distributorsearch') != null && Cookies.get('Distributorsearch') != "") {
                tab.fnFilter(Cookies.get('Distributorsearch'));
            }
        }
        else {
            var tab = $("#DistributorTable").dataTable({
                "aLengthMenu": [[5, 10, 15, 25, -1], [5, 10, 15, 25, "All"]],
                "sDom": '<"top"flp>rt<"bottom"pri>',
                "order": [[0, "desc"]],
                "aoColumnDefs": [{ "bVisible": false, "aTargets": [0] }]
            });
            table = tab;
            pagno = Number(pagno);
            if (pagno > 0) {
                tab.fnPageChange(pagno, true);
            }
            if (Cookies.get('Distributorsearch') != null && Cookies.get('Distributorsearch') != "") {
                tab.fnFilter(Cookies.get('Distributorsearch'));
            }
        }
        if (isloaded) {
            //setTimeout(function () {
            //    var ddl = $("select[name=Assemblies_Category]");
            //    var ddlopt = $("select[name=Assemblies_Category] option");
            //    var opt = "";

            //    for (var i = 0; i < ddlopt.length; i++) {
            //        if ($(ddlopt[i]).val() != null && $(ddlopt[i]).val() != "" && $(ddlopt[i]).val() != "1") {
            //            $('#lstassembly_cat').append("<option value='" + $(ddlopt[i]).val() + "'>" + $(ddlopt[i]).val() + "</options>");
            //        }
            //    }
            //}, 2000)
            isloaded = true;
        }
        $($('#DistributorTable_length')[0].parentElement).removeClass('col-sm-6');
        $($('#DistributorTable_length')[0].parentElement).addClass('col-sm-12');
        //var jobdiv = $('#Jobtable');
        //$(jobdiv[0].parentElement).removeClass('col-sm-12');
        //$(jobdiv[0].parentElement).addClass('table-responsive');0-
        $(assemdropdwn).change(function () {
            var len = this.value;
            Cookies.set('Distributordtpagelen', len);
        });
        $('#DistributorTable_length_filter input').on("keyup", function () {
            Cookies.set('Distributorsearch', $(this).val());
        });
        $('#DistributorTable').on('page.dt', function () {
            var info = this;
            setTimeout(function () {
                var ss = $('.paginate_button.active');
                var pgno = ss[0].innerText;
                if (pgno != "" && pgno != "0") {
                    pgno = Number(pgno) - Number(1);
                }
                Cookies.set('Distributorpageno', pgno);
            }, 1000);
            var ss = $('.paginate_button.active');
        });
    });
         
   
    
</script>
<div class="row">
    <table id="DistributorTable" class="table table-bordered datatables" cellspacing="0" width="100%">
        <thead style="background-color: #45525F">
            <tr> 
                <th>Distributor ID</th>  
                <th>Distributor Name</th>
                <th>No Of Users</th>
                <th>Email</th>
                <th>License Expiry Date</th>
                <th>Active</th>
                <th>Action </th>
            </tr>
        </thead>
        <tbody>
            @if (Model.Count > 0)
            {
                foreach (var item in Model)
                {
                    var src = "";
                    var status = 0;
                    <tr>
                        <td>@item.ID</td>
                        <td>@item.Company</td>
                        <td>@item.No_Of_Users</td>
                        <td>@item.Email</td>
                        <td>@item.Expiry_Date.ToShortDateString()</td> 
                        <td>
                            @if (item.IsActive == false)
                            {
                                status = 0;
                                <span class="glyphicon glyphicon-remove-circle inactiveicon" style="color:#ff0000;font-size: 18px;"></span>
                            }
                            else
                            {
                                status = 1;
                                <span class="glyphicon glyphicon-ok-circle activicon"style="color:forestgreen;font-size: 18px;" ></span>
                            }

                        </td>
                        <td>
                            <a href="javascript:void(0);" onclick="EditDistributorinfo('@item.ID');">
                                <span class="glyphicon glyphicon-pencil"></span>
                            </a>&nbsp;&nbsp;&nbsp;

                            @*<a class="confirm" id="alert" href="javascript:void(0)" onclick="DeleteClientDetails('@item.Client_ID','@status');">

                                    @if (item.IsActive == false)
                                    {
                                        <span class="glyphicon glyphicon-unchecked selecticon"></span>
                                    }
                                    else
                                    {
                                        <span class="glyphicon glyphicon-check selecticon"></span>
                                    }
                                </a>*@
                        </td>
                    </tr>

                }
            }
            
        </tbody>
    </table>

</div>