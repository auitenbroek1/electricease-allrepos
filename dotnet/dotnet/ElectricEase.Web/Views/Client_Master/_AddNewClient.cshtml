@model ElectricEase.Models.Client_MasterInfo
@{
    if (Model.Client_Logo != null)
    {
        var base64 = Convert.ToBase64String(Model.Client_Logo);
        var imgSrc = String.Format("data:image/gif;base64,{0}", base64);
    }
    
}
@*<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
*@
<script>


    $.ajax({
        url: "/Ajax/GetMyClienListinCM",
        type: 'GET',
        dataType: 'json',
        success: function (data) {
            //alert("ajx");
            //alert(data);
            assignToEventsColumns(data);
        }
    });


    function assignToEventsColumns(data) {
       
        var table = $('#example').dataTable({
            "aLengthMenu": [[8, 10, 25, -1], [8, 10, 25, "All"]],
            //"dom": 'C<"clear">lfrtip',
            //"bAutoWidth": false,
            "aaData": data,
            "aaSorting": [],
            "aoColumnDefs": [
               {
                   "aTargets": [0],
                   //"bSearchable": false,
                   //"bSortable": false,
                   //"bSort": false,
                   "mData": "EventTypeId",
                   "mRender": function (event) {
                       //return  '<input class="childCheck" type="checkbox" id="childCheckBoxes" value="' + event + '">';
                       return event;
                   }
               },

               {
                   "aTargets": [1],
                   "mData": "EventType"
               }
            ], "aoColumns": [
                            { "mData": "Client_ID" },
                             { "mData": "Client_Company" },
                            { "mData": "City" },
                            { "mData": "State" },
                            { "mData": "Phone" },
                            { "mData": "Email" },
                            {
                                "mDataProp": function (source, type, val) {
                                    return '<a href="/Client_Master/EditClientMaster?id=' + source.Client_ID + '"><span class="glyphicon glyphicon-pencil"></span></a> &nbsp;&nbsp;&nbsp;<a  class="confirm" id="alert"  href="/Client_Master/DeleteClient?id=' + source.Client_ID + '"><span class="glyphicon glyphicon-trash"></span></a>'
                                    //return '<a class="EditClick" onclick="showEdit(' + source.Client_ID + ')"><span class="glyphicon glyphicon-pencil"></span></a>'
                                }
            }
            ]
        });

    }
    $(document).ready(function () {
        //alert("jiii");
        $('.dataTables_filter input').attr("placeholder", "enter seach terms here");
        $('li').removeClass('active');
        $("#clientmaster").addClass('active');
        //alert("active");
        //To change content tittles
        $(".content-title").text("Client Master");

        //$(".confirmDialog").live("click", function (e) {

        //    // e.preventDefault(); use this or return false
        //    var url = $(this).attr('href');

        //    $("#dialog-confirm").dialog({
        //        autoOpen: false,
        //        resizable: false,
        //        height: 170,
        //        width: 350,
        //        show: { effect: 'drop', direction: "up" },
        //        modal: true,
        //        draggable: true,
        //        buttons: {
        //            "OK": function () {
        //                $(this).dialog("close");
        //                window.location = url;

        //            },
        //            "Cancel": function () {
        //                $(this).dialog("close");

        //            }
        //        }
        //    });
        //    $("#dialog-confirm").dialog('open');
        //    return false;
        //});

    });

    $(function () {
        $("#fileupload").change(function () {
            var fileUpload = document.getElementById("fileupload");
            $("#firstlogo").hide();
            $("#dvPreview").html("");
            var regex = /^([a-zA-Z0-9\s_\\.\-:])+(.jpg|.jpeg|.gif|.png|.bmp)$/;
            if (regex.test($(this).val().toLowerCase())) {
                if ($.browser.msie && parseFloat(jQuery.browser.version) <= 9.0) {
                    $("#dvPreview").show();
                    $("#dvPreview")[0].filters.item("DXImageTransform.Microsoft.AlphaImageLoader").src = $(this).val();
                }
                else {
                    if (typeof (FileReader) != "undefined") {

                        $("#dvPreview").show();
                        $("#dvPreview").append("<img height='75' width='30%'/>").attr({ width: '300px', height: '150px' });
                        var reader = new FileReader();
                        reader.onload = function (e) {
                            $("#dvPreview img").attr("src", e.target.result);
                        }
                        reader.readAsDataURL($(this)[0].files[0]);
                    } else {
                        alert("This browser does not support FileReader.");
                    }
                }
            } else {
                alert("Please upload a valid image file.");
            }
        });
    });

    $(function () {
        $("#Reset").click(function () {
            $("#Client_Company").val("");
            $("#Client_Logo").val("");
            $("#Address").val("");
            $("#Address2").val("");
            $("#City").val("");
            $("#State").val("");
            $("#ZipCode").val("");
            $("#Phone").val("");
            $("#Mobile").val("");
            $("#Fax").val("");
            $("#Email").val("");
            $("#Contact_person").val("");
            $("#SuperUser").val("");
            $("#SuperUser_Pwd").val("");
            $("#fileupload").val("");

            $("#dvPreview img:last-child").remove()
        });

    });

    $(function () {

        $('#deletebtn').click(function () {
            alert("lkjkjkjj");
            var answer = confirm("Are you sure?");
            if (answer) {
                return true;
            } else {
                return false;
            }
        });
    });
    $(function () {

        $(".profile-hd").click(function () {
            //alert("hii");
            $(this).next().slideToggle();
        });
    });

    
</script>
<style>
   .dataTables_filter {

        padding-bottom: 35px;
    }
</style>

<fieldset>
    <div id="accordion">
         <div class=" box-row  profile-hd">
                <h7 class="box-heading"><strong> &nbsp  Add Client Details </strong> <span class="pull-right apse b" style="padding-right:5px; color:#ffffff">
                                    <i class="icon ion-chevron-down"></i></span></h7>
               
            </div>
        @*<h7 class="box-heading"><strong> Add Client Details</strong>
                                    <a data-toggle="collapse" data-parent="#accordion" href="#collapseOne">
                                        <span class="pull-right apse a">
                                        <i class="icon ion-chevron-up"></i></span>
                                    </a>
                                </h7>*@
        
        <div id="collapseOne" class="panel-collapse collapse in">
            @using (Html.BeginForm("AddClient", "Client_Master", FormMethod.Post, new { @class = "form-horizontal", enctype = "multipart/form-data", id = "Addform" }))
            {
                @Html.ValidationSummary(true);
                                
                <div class="row">
                    <div class="col-md-12">
                        <div class="panel panel-default">
                            <div class="panel-body">
                                
                                    <div class="panel-body">
                                        <div class="row-fluid">
                                            <div class="col-md-4">
                                                <div class="form-group">
                                                    <label for="title"><strong>Client Company <span class="err">*</span>:</strong></label>
                                                    @Html.TextBoxFor(m => m.Client_Company, new { @class = "form-control", @maxlength = "500", @placeholder = "Client Company" })
                                                    @*<input type="text" class="form-control" name="LabourName" id="LabourName" autofocus maxlength="50" placeholder="Labour Name" tabindex="1" onkeypress="return onKeyValidate(event,alphanumeric);">*@
                                                    @Html.ValidationMessageFor(m => m.Client_Company)
                                                </div>
                                            </div>
                                        </div>


                                        <div class="row-fluid">
                                            <div class="col-md-4">
                                                <div class="form-group">
                                                    <label for="title"><strong>Contact Person <span class="err">*</span>:</strong></label>
                                                    @Html.TextBoxFor(m => m.Contact_person, new { @class = "form-control", @maxlength = "100", @placeholder = "Contact Person" })
                                                    @Html.ValidationMessageFor(m => m.Contact_person)
                                                    @*<input type="text" class="form-control" name="LabourName" id="LabourName" autofocus maxlength="50" placeholder="Labour Name" tabindex="1" onkeypress="return onKeyValidate(event,alphanumeric);">*@
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row-fluid">
                                            <div class="col-md-4">
                                                <div class="form-group">
                                                    <label for="title"><strong>Address :</strong></label>
                                                    @Html.TextBoxFor(m => m.Address, new { @class = "form-control", @maxlength = "200", @placeholder = "Address" })
                                                    @Html.ValidationMessageFor(m => m.Address)
                                                    @*<input type="text" class="form-control" name="LabourName" id="LabourName" autofocus maxlength="50" placeholder="Labour Name" tabindex="1" onkeypress="return onKeyValidate(event,alphanumeric);">*@
                                                </div>
                                            </div>
                                        </div>

                                        <div class="row-fluid">
                                            <div class="col-md-4">
                                                <div class="form-group">
                                                    <label for="title"><strong>Address2 :</strong></label>
                                                    @Html.TextBoxFor(m => m.Address2, new { @class = "form-control", @maxlength = "200", @placeholder = "Address2" })
                                                    @Html.ValidationMessageFor(m => m.Address2)
                                                    @*<input type="text" class="form-control" name="LabourName" id="LabourName" autofocus maxlength="50" placeholder="Labour Name" tabindex="1" onkeypress="return onKeyValidate(event,alphanumeric);">*@
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row-fluid">
                                            <div class="col-md-4">
                                                <div class="form-group">
                                                    <label for="title"><strong>City :</strong></label>
                                                    @Html.TextBoxFor(m => m.City, new { @class = "form-control", @maxlength = "100", @placeholder = "City" })
                                                    @Html.ValidationMessageFor(m => m.City)
                                                    @*<input type="text" class="form-control" name="LabourName" id="LabourName" autofocus maxlength="50" placeholder="Labour Name" tabindex="1" onkeypress="return onKeyValidate(event,alphanumeric);">*@
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row-fluid">

                                            <div class="col-md-4">
                                                <div class="form-group">
                                                    <label for="title"><strong>State :</strong></label>
                                                    @Html.TextBoxFor(m => m.State, new { @class = "form-control", @maxlength = "100", @placeholder = "State" })
                                                    @Html.ValidationMessageFor(m => m.State)
                                                    @*<input type="text" class="form-control" name="LabourName" id="LabourName" autofocus maxlength="50" placeholder="Labour Name" tabindex="1" onkeypress="return onKeyValidate(event,alphanumeric);">*@
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row-fluid">
                                            <div class="col-md-4">
                                                <div class="form-group">
                                                    <label for="title"><strong>Zip Code :</strong></label>
                                                    @Html.TextBoxFor(m => m.ZipCode, new { @class = "form-control", @maxlength = "10", @placeholder = "ZipCode" })
                                                    @Html.ValidationMessageFor(m => m.ZipCode)
                                                    @*<input type="text" class="form-control" name="LabourName" id="LabourName" autofocus maxlength="50" placeholder="Labour Name" tabindex="1" onkeypress="return onKeyValidate(event,alphanumeric);">*@
                                                </div>
                                            </div>

                                        </div>
                                        <div class="row-fluid">
                                            <div class="col-md-4">
                                                <div class="form-group">
                                                    <label for="title"><strong>Phone <span class="err">*</span> :</strong></label>
                                                    @Html.TextBoxFor(m => m.Phone, new { @class = "form-control", @maxlength = "50", @placeholder = "Phone"})
                                                     <span id="Phone_errmsg" class="error"></span>
                                                    @Html.ValidationMessageFor(m => m.Phone)
                                                    @*<input type="text" class="form-control" name="LabourName" id="LabourName" autofocus maxlength="50" placeholder="Labour Name" tabindex="1" onkeypress="return onKeyValidate(event,alphanumeric);">*@
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row-fluid">
                                            <div class="col-md-4">
                                                <div class="form-group">
                                                    <label for="title"><strong>Mobile :</strong></label>
                                                    @Html.TextBoxFor(m => m.Mobile, new { @class = "form-control", @maxlength = "50", @placeholder = "Mobile" })
                                                      <span id="Mobile_errmsg" class="error"></span>
                                                    @Html.ValidationMessageFor(m => m.Mobile)
                                                    @*<input type="text" class="form-control" name="LabourName" id="LabourName" autofocus maxlength="50" placeholder="Labour Name" tabindex="1" onkeypress="return onKeyValidate(event,alphanumeric);">*@
                                                </div>
                                            </div>


                                        </div>
                                        <div class="row-fluid">
                                            <div class="col-md-4">
                                                <div class="form-group">
                                                    <label for="title"><strong>Fax :</strong></label>
                                                    @Html.TextBoxFor(m => m.Fax, new { @class = "form-control", @maxlength = "50", @placeholder = "Fax" })
                                                    @Html.ValidationMessageFor(m => m.Fax)
                                                    @*<input type="text" class="form-control" name="LabourName" id="LabourName" autofocus maxlength="50" placeholder="Labour Name" tabindex="1" onkeypress="return onKeyValidate(event,alphanumeric);">*@
                                                </div>
                                            </div>
                                        </div>

                                      
                                        <div class="row-fluid">
                                            <div class="col-md-4">
                                                <div class="form-group">
                                                    <label for="title"><strong>Email <span class="err">*</span> :</strong></label>
                                                    @Html.TextBoxFor(m => m.Email, new { @class = "form-control required email", @maxlength = "100", @placeholder = "Email" })
                                                    @Html.ValidationMessageFor(m => m.Email)
                                                    @*<input type="text" class="form-control" name="LabourName" id="LabourName" autofocus maxlength="50" placeholder="Labour Name" tabindex="1" onkeypress="return onKeyValidate(event,alphanumeric);">*@
                                                </div>
                                            </div>
                                        </div>

                                        
                                        @if (Model.Client_Logo == null)
                                        {
                                            <div class="row-fluid">
                                                <div class="col-md-4">
                                                    <div class="form-group">
                                                        <label for="lable"><strong>Company Logo <span class="err">*</span>:</strong></label>

                                             
                                                        @Html.TextBoxFor(m => m.UploadedFile, new { type = "file", id = "fileupload" })
                                                        @Html.ValidationMessageFor(m => m.UploadedFile)
                                                       
                                                        <label id="requirdMsg"></label>
                                                    </div>

                                                </div>
                                            </div>
                                            <div class="col-md-4">
                                               
                                                <div class="form-group" id="dvPreview">
                                                     @if (ViewBag.file!=null)
                                                        {<input type="hidden" name="Client_Logo" value="@ViewBag.file"/>
                                                           <input  type="hidden" name="UploadedFile" id="UploadedFile" value="@ViewBag.upfile"/>
                                                    
                                                               <img src="data:image;base64,@ViewBag.file" width="80" height="80"/>
                                                        }
                                                </div>

                                                @* <div class="form-group" >
                                        </div>*@

                                            </div>
                                        }
                                        @if (Model.Client_Logo != null)
                                        {
                                            <div class="row-fluid">
                                                <div class="col-md-4">
                                                    <div class="form-group">
                                                        <label for="lable"><strong>Company Logo<span class="err">*</span> :</strong></label>
                                                        <input type="file" id="fileupload" name="File" />
                                                        <span id="requirdMsg"></span>
                                                    </div>
                                                </div>
                                                <div class="col-md-4">
                                                    <div class="form-group" id="dvPreview" style="display: none"></div>
                                                    <div class="form-group" id="firstlogo">
                                                        
                                                        <img src="data:image;base64,@System.Convert.ToBase64String(Model.Client_Logo)" width="80" height="80"/>
                                                    </div>
                                                </div>
                                            </div>

                                        }
                                    </div>
                                    
                                </div>
                            </div>
                        </div>
                    </div>
              
                
          


      
        <div class=" box-row  profile-hd">
                <h7 class="box-heading"><strong> &nbsp Config Details</strong> <span class="pull-right apse b" style="padding-right:5px; color:#ffffff">
                                    <i class="icon ion-chevron-down"></i></span></h7>
               
            </div>
          <div class="row">
                    <div class="col-md-12">
                        <div class="panel panel-default">
                            <div class="panel-body">
                                  <div class="row-fluid">
                                            <div class="col-md-4">
                                                <div class="form-group">
                                                    <label for="title"><strong>Client Admin ID<span class="err">*</span> :</strong></label>
                                                    @Html.TextBoxFor(m => m.SuperUser, new { @class = "form-control", @maxlength = "100", @placeholder = "Client Admin" })
                                                    @Html.ValidationMessageFor(m => m.SuperUser)

                                                </div>
                                            </div>
                                        </div>
                                        <div class="row-fluid">
                                            <div class="col-md-4">
                                                <div class="form-group">
                                                    <label for="title"><strong>Password <span class="err">*</span> :</strong></label>
                                                    @Html.PasswordFor(m => m.SuperUser_Pwd, new { @class = "form-control", @maxlength = "100", @placeholder = "Password" })
                                                    @Html.ValidationMessageFor(m => m.SuperUser_Pwd)
                                                    @*<input type="text" class="form-control" name="LabourName" id="LabourName" autofocus maxlength="50" placeholder="Labour Name" tabindex="1" onkeypress="return onKeyValidate(event,alphanumeric);">*@
                                                </div>
                                            </div>

                                        </div>
                                 <div class="row-fluid">
                                            <div class="col-md-4">
                                                <div class="form-group">
                                                    <label for="title"><strong>JobID Preffix  :</strong></label>
                                                    @Html.TextBoxFor(m => m.JobIDPreffix, new { @class = "form-control", @maxlength = "3", @placeholder = "Preffix" })
                                                    @Html.ValidationMessageFor(m => m.JobIDPreffix)
                                                    @*<input type="text" class="form-control" name="LabourName" id="LabourName" autofocus maxlength="50" placeholder="Labour Name" tabindex="1" onkeypress="return onKeyValidate(event,alphanumeric);">*@
                                                </div>
                                            </div>

                                        </div>
                                <div class="row-fluid">
                                            <div class="col-md-4">
                                                <div class="form-group">
                                                    <label for="title"><strong>Sender Email Address  :</strong></label>
                                                    @Html.TextBoxFor(m => m.Sender_EmailAddress, new { @class = "form-control", @maxlength = "100", @placeholder = "Sender Email" })
                                                    @Html.ValidationMessageFor(m => m.Sender_EmailAddress)
                                                    @*<input type="text" class="form-control" name="LabourName" id="LabourName" autofocus maxlength="50" placeholder="Labour Name" tabindex="1" onkeypress="return onKeyValidate(event,alphanumeric);">*@
                                                </div>
                                            </div>

                                        </div>
                                <div class="row-fluid">
                                            <div class="col-md-4">
                                                <div class="form-group">
                                                    <label for="title"><strong>Sender Email Password  :</strong></label>
                                                    @Html.PasswordFor(m => m.Sender_EmailPassword, new { @class = "form-control", @maxlength = "100", @placeholder = " Sender Password" })
                                                    @Html.ValidationMessageFor(m => m.Sender_EmailPassword)
                                                    @*<input type="text" class="form-control" name="LabourName" id="LabourName" autofocus maxlength="50" placeholder="Labour Name" tabindex="1" onkeypress="return onKeyValidate(event,alphanumeric);">*@
                                                </div>
                                            </div>

                                        </div>
                                <div class="row-fluid">
                                            <div class="col-md-4">
                                                <div class="form-group">
                                                    <label for="title"><strong>Domain Name  :</strong></label>
                                                    @Html.TextBoxFor(m => m.DomainName, new { @class = "form-control", @maxlength = "100", @placeholder = "Domain Name" })
                                                    @Html.ValidationMessageFor(m => m.DomainName)
                                                    @*<input type="text" class="form-control" name="LabourName" id="LabourName" autofocus maxlength="50" placeholder="Labour Name" tabindex="1" onkeypress="return onKeyValidate(event,alphanumeric);">*@
                                                </div>
                                            </div>

                                        </div>
                                <div class="row-fluid">
                                            <div class="col-md-4">
                                                <div class="form-group">
                                                    <label for="title"><strong>SMTP Host  :</strong></label>
                                                    @Html.TextBoxFor(m => m.SMTP_Host, new { @class = "form-control", @maxlength = "100", @placeholder = "Host" })
                                                    @Html.ValidationMessageFor(m => m.SMTP_Host)
                                                    @*<input type="text" class="form-control" name="LabourName" id="LabourName" autofocus maxlength="50" placeholder="Labour Name" tabindex="1" onkeypress="return onKeyValidate(event,alphanumeric);">*@
                                                </div>
                                            </div>

                                        </div>
                                <div class="row-fluid">
                                            <div class="col-md-4">
                                                <div class="form-group">
                                                    <label for="title"><strong>SMTP Port  :</strong></label>
                                                    @Html.TextBoxFor(m => m.SMTP_Port, new { @class = "form-control", @maxlength = "100", @placeholder = " Port " })
                                                    @Html.ValidationMessageFor(m => m.SMTP_Port)
                                                    @*<input type="text" class="form-control" name="LabourName" id="LabourName" autofocus maxlength="50" placeholder="Labour Name" tabindex="1" onkeypress="return onKeyValidate(event,alphanumeric);">*@
                                                </div>
                                            </div>

                                        </div>
                                <div class="row-fluid">
                                            <div class="col-md-4">
                                                <div class="form-group">
                                                    <label for="title"><strong>Auto Save Time(Secs) :</strong></label>
                                                    @Html.TextBoxFor(m => m.AutoSaveTime_InSecs, new { @class = "form-control", @maxlength = "4", @placeholder = "Seconds" })
                                                    @Html.ValidationMessageFor(m => m.AutoSaveTime_InSecs)
                                                    @*<input type="text" class="form-control" name="LabourName" id="LabourName" autofocus maxlength="50" placeholder="Labour Name" tabindex="1" onkeypress="return onKeyValidate(event,alphanumeric);">*@
                                                </div>
                                            </div>

                                        </div>
                                
                                </div>
                            <div class="panel-footer clearfix">
                                        <div class="pull-right" style="width:35%">
                                           @* <span class="glyphicon glyphicon-plus"></span>*@
                                            <button type="submit" value="Submit" class="btn btn-flat btn-primary btn-sm" name="addLabour" tabindex="10"  style="width:49%" id="Addbtn">Add </button>
                                            <a href="#" class="btn btn-flat btn-default btn-sm" role="button" tabindex="11"  id="Reset" style="width:49%">Clear </a>
                                            @*<span class="glyphicon glyphicon-remove-circle"></span>*@
                                        </div>
                                    </div>


                             
                            </div>
                        </div>
              </div>
            }
                  </div>
             <div class=" box-row  profile-hd">
                <h7 class="box-heading"><strong> &nbsp  Client Listing</strong> <span class="pull-right apse b" style="padding-right:5px; color:#ffffff">
                                    <i class="icon ion-chevron-down"></i></span></h7>
               
            </div>
            @*<h7 class="box-heading"><strong>Client Listing</strong>
                                    <a data-toggle="collapse" data-parent="#accordion" href="#collapseTwo">
                                    <span class="pull-right apse b">
                                    <i class="icon ion-chevron-up"></i></span>
                                    </a>
                                    </h7>
            <hr>*@
       
        <div id="collapseTwo" class="panel-collapse collapse in">

            <table id="example" class="table table-bordered datatables" cellspacing="0" width="100%"  data-ajax-url-edit="@Url.Action("EditClientMaster", "Client_Master");">
               <thead style="background-color:#45525F">
                    <tr>
                        <th>Client ID</th>
                        <th>Client Company</th>
                        <th>State</th>
                        <th>City</th>
                        <th>Phone</th>
                        <th>Email</th>

                        <th>Action </th>

                    </tr>

                </thead>
            </table>



        </div>

    </div>
</fieldset>





